# Шаг 1: Установка базового образа
FROM node:18-alpine

# Шаг 2: Установка рабочей директории
WORKDIR /app

# Шаг 3: Копируем файлы package.json и package-lock.json
COPY package*.json ./

# Шаг 4: Установка зависимостей
RUN npm install

# Шаг 5: Копируем все файлы проекта
COPY . .

# Шаг 6: Сборка приложения для production
RUN npm run build

# Шаг 7: Установка сервера для обслуживания статических файлов (например, serve)
RUN npm install -g serve

# Шаг 8: Указываем порт, который будет использован в контейнере
EXPOSE 3000

# Шаг 9: Команда для запуска сервера
CMD ["serve", "-s", "build", "-l", "3000"]